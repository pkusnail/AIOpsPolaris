# Web UI 使用指南

## 🖥️ 界面概览

AIOps Polaris Web UI (`web_ui.html`) 是一个简洁美观的智能运维聊天界面，提供了完整的AIOps助手交互功能。

## 🚀 快速开始

### 1. 启动系统
确保API服务正在运行：
```bash
python -m uvicorn src.api.main:app --host 0.0.0.0 --port 8888 --reload
```

### 2. 打开Web界面
在浏览器中打开 `web_ui.html` 文件：
```bash
# 方法一：直接在浏览器中打开文件
open web_ui.html

# 方法二：使用文件路径
file://{ your local path to project }/AIOpsPolaris/web_ui.html
```

## 🎨 界面功能说明

### 主聊天区域
- **消息显示区**: 显示与AI助手的对话历史
- **输入框**: 输入您的运维问题或查询
- **发送按钮**: 点击发送消息或按 Enter 键
- **状态栏**: 显示连接状态和处理进度

### 右侧快捷操作面板

#### 🔧 快捷操作
- **🔍 系统状态**: 检查AIOps系统各组件健康状况
- **📊 数据统计**: 查看系统数据和使用统计
- **🔍 搜索知识库**: 直接搜索运维知识库
- **🗑️ 清空对话**: 清除当前会话的聊天记录

#### 💡 示例问题
- **CPU过高问题**: "服务器CPU使用率过高怎么办？"
- **数据库问题**: "数据库连接超时如何排查？"
- **监控实践**: "微服务监控最佳实践"

## 📋 使用场景

### 场景1: 故障诊断咨询
1. **描述问题**: 在输入框中详细描述遇到的运维问题
   ```
   例如: "生产环境Nginx响应时间突然变慢，用户反馈页面加载超过10秒"
   ```

2. **AI分析**: 系统会通过多Agent协作进行：
   - 问题分析和分类
   - 相关知识检索
   - 根因推理分析
   - 解决方案生成

3. **获得建议**: 收到包含具体操作步骤的专业建议

### 场景2: 知识库搜索
1. **点击"搜索知识库"按钮**
2. **输入关键词**: 如 "Redis性能优化"
3. **查看结果**: 获得相关文档、最佳实践和解决方案

### 场景3: 系统健康监控
1. **点击"系统状态"按钮**
2. **查看组件状态**: 
   - Weaviate 向量数据库连接状态
   - Neo4j 图数据库连接状态  
   - 嵌入模型服务状态
3. **确认系统正常**: 绿色表示健康，红色表示异常

## ⚡ 高级功能

### 会话管理
- **自动会话创建**: 系统自动为每个用户创建和管理会话
- **会话持久化**: 所有对话记录保存在数据库中
- **多轮对话**: 支持上下文相关的连续对话

### 智能搜索
- **向量搜索**: 基于语义理解的相似性搜索
- **图谱搜索**: 基于知识图谱的关系查询
- **全文搜索**: 基于关键词的精确匹配
- **混合搜索**: 综合多种搜索结果并智能排序

### 实时反馈
- **处理状态**: 实时显示AI处理进度
- **响应时间**: 显示每次查询的处理耗时
- **错误处理**: 友好的错误提示和重试机制

## 🎯 最佳实践

### 如何提出好的运维问题

1. **提供具体信息**:
   ```
   ❌ 不好: "系统有问题"
   ✅ 好的: "Web服务器CPU使用率达到90%，响应时间从100ms增加到3秒"
   ```

2. **包含环境信息**:
   ```
   ❌ 不好: "数据库连不上"
   ✅ 好的: "生产环境MySQL 8.0连接池耗尽，应用显示'Too many connections'错误"
   ```

3. **描述影响范围**:
   ```
   ❌ 不好: "服务慢了"
   ✅ 好的: "订单服务响应慢，影响50%用户下单，错误率从0.1%升至5%"
   ```

### 交互技巧

1. **使用快捷按钮**: 点击示例问题快速开始对话
2. **查看系统状态**: 遇到问题时先检查系统健康状况
3. **搜索相关知识**: 在对话前可先搜索相关文档
4. **保持对话连贯**: 可以追问细节或要求更具体的步骤

## 🔧 技术细节

### API通信
- **基础URL**: `http://localhost:8888`
- **CORS支持**: 支持跨域请求
- **错误处理**: 完善的网络异常处理
- **超时控制**: 请求超时自动重试

### 数据格式
```javascript
// 聊天请求格式
{
  "message": "用户输入的问题",
  "user_id": "web_user_1693486234567",
  "temperature": 0.7
}

// 响应格式
{
  "success": true,
  "response": "AI生成的回复",
  "session_id": "uuid",
  "processing_time": 1.23,
  "suggestions": ["建议1", "建议2", "建议3"]
}
```

## 🐛 故障排查

### 常见问题

1. **"Failed to fetch" 错误**
   - 确认API服务是否正在运行 (localhost:8888)
   - 检查浏览器控制台是否有CORS错误
   - 尝试刷新页面

2. **界面显示异常**
   - 确认浏览器支持现代JavaScript (Chrome/Firefox/Safari)
   - 检查是否有JavaScript错误
   - 清除浏览器缓存

3. **响应速度慢**
   - 检查API服务日志是否有错误
   - 确认数据库连接正常
   - 查看系统资源使用情况

### 调试模式
打开浏览器开发者工具 (F12) 查看：
- **Console**: JavaScript错误信息
- **Network**: API请求响应详情
- **Application**: 本地存储和会话信息

---

通过这个Web UI，DevOps团队可以轻松地与AIOps Polaris系统进行交互，获得智能化的运维建议和支持。
